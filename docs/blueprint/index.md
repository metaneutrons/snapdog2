# Table of Contents

1. [Introduction](01-introduction.md#1-introduction)

- [1.1 Purpose](01-introduction.md#11-purpose)
- [1.2 Core Objectives](01-introduction.md#12-core-objectives)
- [1.3 Target Use Cases](01-introduction.md#13-target-use-cases)

2. [Coding Style & Conventions](02-coding-style-conventions.md#2-coding-style-conventions)

- [2.1 Overview](02-coding-style-conventions.md#21-overview)
- [2.2 General Conventions](02-coding-style-conventions.md#22-general-conventions)
- [2.3 Formatting and Layout](02-coding-style-conventions.md#23-formatting-and-layout)
- [2.4 Naming Conventions](02-coding-style-conventions.md#24-naming-conventions)
- [2.5 Logging (LoggerMessage Source Generator Pattern)](02-coding-style-conventions.md#25-logging-loggermessage-source-generator-pattern)
- [2.6 Disposal Pattern](02-coding-style-conventions.md#26-disposal-pattern)
- [2.7 StyleCop Enforcement Summary](02-coding-style-conventions.md#27-stylecop-enforcement-summary)
- [2.8 StyleCop Configuration (`stylecop.json`)](02-coding-style-conventions.md#28-stylecop-configuration-stylecopjson)

3. [System Architecture](03-system-architecture.md#3-system-architecture)

- [3.1 High-Level Architecture](03-system-architecture.md#31-high-level-architecture)
- [3.1.1 Component Diagram (Logical Layers in Single Project)](03-system-architecture.md#311-component-diagram-logical-layers-in-single-project)
- [3.1.2 Communication Flow Example (MQTT Play Command)](03-system-architecture.md#312-communication-flow-example-mqtt-play-command)
- [3.2 Key Components (Roles within Folders)](03-system-architecture.md#32-key-components-roles-within-folders)
- [3.2.1 `/Core` Layer](03-system-architecture.md#321-core-layer)
- [3.2.2 `/Server` Layer](03-system-architecture.md#322-server-layer)
- [3.2.3 `/Infrastructure` Layer](03-system-architecture.md#323-infrastructure-layer)
- [3.2.4 `/Api` Layer](03-system-architecture.md#324-api-layer)
- [3.2.5 `/Worker` Layer](03-system-architecture.md#325-worker-layer)

4. [Core Components & State Management](04-core-components-state-management.md#4-core-components-state-management)

- [4.1 Core Structure Overview](04-core-components-state-management.md#41-core-structure-overview)
- [4.2 State Management](04-core-components-state-management.md#42-state-management)
- [4.2.1 Immutable State Objects (Canonical Definitions)](04-core-components-state-management.md#421-immutable-state-objects-canonical-definitions)
- [4.2.2 Thread Synchronization](04-core-components-state-management.md#422-thread-synchronization)
- [4.2.3 State Types Managed & Ownership](04-core-components-state-management.md#423-state-types-managed-ownership)
- [4.2.4 State Change Flow](04-core-components-state-management.md#424-state-change-flow)
- [4.3 Event-Driven Architecture](04-core-components-state-management.md#43-event-driven-architecture)
- [4.4 Startup Sequence](04-core-components-state-management.md#44-startup-sequence)
- [4.5 Error Handling Strategy](04-core-components-state-management.md#45-error-handling-strategy)

5. [Cross-Cutting Concerns](05-cross-cutting-concerns.md#5-cross-cutting-concerns)

- [5.1 Error Handling Strategy](05-cross-cutting-concerns.md#51-error-handling-strategy)
- [5.1.1 Result Pattern Implementation (Canonical Definition)](05-cross-cutting-concerns.md#511-result-pattern-implementation-canonical-definition)
- [5.1.2 Usage in Services](05-cross-cutting-concerns.md#512-usage-in-services)
- [5.2 Logging Strategy](05-cross-cutting-concerns.md#52-logging-strategy)
- [5.3 Instrumentation and Metrics](05-cross-cutting-concerns.md#53-instrumentation-and-metrics)
- [5.4 Validation](05-cross-cutting-concerns.md#54-validation)
- [5.5 Interplay](05-cross-cutting-concerns.md#55-interplay)

6. [Resilience Configuration System](06-resilience-configuration.md#6-resilience-configuration-system)

- [6.1 Overview](06-resilience-configuration.md#61-overview)
- [6.2 Architecture Overview](06-resilience-configuration.md#62-architecture-overview)
- [6.2.1 Resilience Configuration Structure](06-resilience-configuration.md#621-resilience-configuration-structure)
- [6.2.2 Policy Types](06-resilience-configuration.md#622-policy-types)
- [6.2.3 Resilience Policy Factory](06-resilience-configuration.md#623-resilience-policy-factory)
- [6.3 Environment Variable Structure](06-resilience-configuration.md#63-environment-variable-structure)
- [6.3.1 Variable Naming Convention](06-resilience-configuration.md#631-variable-naming-convention)
- [6.3.2 KNX Service Resilience Configuration](06-resilience-configuration.md#632-knx-service-resilience-configuration)
- [6.3.2.1 Connection Policy Environment Variables](06-resilience-configuration.md#6321-connection-policy-environment-variables)
- [6.3.2.2 Operation Policy Environment Variables](06-resilience-configuration.md#6322-operation-policy-environment-variables)
- [6.3.3 MQTT Service Resilience Configuration](06-resilience-configuration.md#633-mqtt-service-resilience-configuration)
- [6.3.3.1 Connection Policy Environment Variables](06-resilience-configuration.md#6331-connection-policy-environment-variables)
- [6.3.3.2 Operation Policy Environment Variables](06-resilience-configuration.md#6332-operation-policy-environment-variables)
- [6.3.4 Snapcast Service Resilience Configuration](06-resilience-configuration.md#634-snapcast-service-resilience-configuration)
- [6.3.4.1 Connection Policy Environment Variables](06-resilience-configuration.md#6341-connection-policy-environment-variables)
- [6.3.4.2 Operation Policy Environment Variables](06-resilience-configuration.md#6342-operation-policy-environment-variables)
- [6.4 Configuration Classes](06-resilience-configuration.md#64-configuration-classes)
- [6.4.1 ResilienceConfig Class](06-resilience-configuration.md#641-resilienceconfig-class)
- [6.4.2 PolicyConfig Class](06-resilience-configuration.md#642-policyconfig-class)
- [6.5 Service Integration](06-resilience-configuration.md#65-service-integration)
- [6.5.1 Service Implementation Pattern](06-resilience-configuration.md#651-service-implementation-pattern)
- [6.5.2 Configuration Validation](06-resilience-configuration.md#652-configuration-validation)
- [6.6 Backoff Strategies](06-resilience-configuration.md#66-backoff-strategies)
- [6.6.1 Linear Backoff](06-resilience-configuration.md#661-linear-backoff)
- [6.6.2 Exponential Backoff](06-resilience-configuration.md#662-exponential-backoff)
- [6.6.3 Constant Backoff](06-resilience-configuration.md#663-constant-backoff)
- [6.7 Environment-Specific Configurations](06-resilience-configuration.md#67-environment-specific-configurations)
- [6.7.1 Development Environment](06-resilience-configuration.md#671-development-environment)
- [6.7.2 Production Environment](06-resilience-configuration.md#672-production-environment)
- [6.7.3 High-Latency Network Environment](06-resilience-configuration.md#673-high-latency-network-environment)
- [6.8 Docker Compose Integration](06-resilience-configuration.md#68-docker-compose-integration)
- [6.8.1 Production Docker Compose Example](06-resilience-configuration.md#681-production-docker-compose-example)
- [6.9 Monitoring and Observability](06-resilience-configuration.md#69-monitoring-and-observability)
- [6.9.1 Resilience Metrics](06-resilience-configuration.md#691-resilience-metrics)
- [6.9.2 Logging Integration](06-resilience-configuration.md#692-logging-integration)
- [6.10 Performance Considerations](06-resilience-configuration.md#610-performance-considerations)
- [6.10.1 Impact Analysis](06-resilience-configuration.md#6101-impact-analysis)
- [6.10.2 Tuning Guidelines](06-resilience-configuration.md#6102-tuning-guidelines)
- [6.11 Benefits](06-resilience-configuration.md#611-benefits)
- [6.11.1 Operational Flexibility](06-resilience-configuration.md#6111-operational-flexibility)
- [6.11.2 Reliability Improvements](06-resilience-configuration.md#6112-reliability-improvements)
- [6.11.3 Maintainability](06-resilience-configuration.md#6113-maintainability)

7. [Fault Tolerance Implementation (Infrastructure Layer)](07-fault-tolerance-implementation-infrastructure-layer.md#7-fault-tolerance-implementation-infrastructure-layer)

- [7.1 Overview](07-fault-tolerance-implementation-infrastructure-layer.md#71-overview)
- [7.2 Polly Integration and Policy Definitions](07-fault-tolerance-implementation-infrastructure-layer.md#72-polly-integration-and-policy-definitions)
- [7.3 Resilience Strategies for Key Components](07-fault-tolerance-implementation-infrastructure-layer.md#73-resilience-strategies-for-key-components)
- [7.3.1 Snapcast Service Resilience (`SnapcastService`)](07-fault-tolerance-implementation-infrastructure-layer.md#731-snapcast-service-resilience-snapcastservice)
- [7.3.2 MQTT Service Resilience (`MqttService`)](07-fault-tolerance-implementation-infrastructure-layer.md#732-mqtt-service-resilience-mqttservice)
- [7.3.3 KNX Service Resilience (`KnxService`)](07-fault-tolerance-implementation-infrastructure-layer.md#733-knx-service-resilience-knxservice)
- [7.3.4 HTTP Client Resilience (Subsonic, etc.)](07-fault-tolerance-implementation-infrastructure-layer.md#734-http-client-resilience-subsonic-etc)
- [7.4 Resilience Registration in DI Container](07-fault-tolerance-implementation-infrastructure-layer.md#74-resilience-registration-in-di-container)

8. [Security Implementation (API Layer)](08-security-implementation-api-layer.md#8-security-implementation-api-layer)

- [8.1 Security Philosophy & Threat Model](08-security-implementation-api-layer.md#81-security-philosophy-threat-model)
- [8.2 API Key Authentication](08-security-implementation-api-layer.md#82-api-key-authentication)
- [8.2.1 API Key Configuration](08-security-implementation-api-layer.md#821-api-key-configuration)
- [8.2.2 API Key Authentication Implementation (ASP.NET Core)](08-security-implementation-api-layer.md#822-api-key-authentication-implementation-aspnet-core)
- [8.2.3 API Security Registration (ASP.NET Core)](08-security-implementation-api-layer.md#823-api-security-registration-aspnet-core)
- [8.3 Security Best Practices Applied](08-security-implementation-api-layer.md#83-security-best-practices-applied)
- [8.4 Security Logging (`ISecurityLogger` / `SecurityLogger`)](08-security-implementation-api-layer.md#84-security-logging-isecuritylogger-securitylogger)

9. [Configuration System](10-configuration-system.md#9-configuration-system)

- [9.1 Architecture Overview](10-configuration-system.md#91-architecture-overview)
- [9.1.1 Unified Configuration Structure](10-configuration-system.md#911-unified-configuration-structure)
- [9.1.2 EnvoyConfig Features Utilized](10-configuration-system.md#912-envoyconfig-features-utilized)
- [9.2 Environment Variable Structure](10-configuration-system.md#92-environment-variable-structure)
- [9.2.1 System Configuration](10-configuration-system.md#921-system-configuration)
- [9.2.2 Telemetry Configuration](10-configuration-system.md#922-telemetry-configuration)
- [9.2.3 API Configuration](10-configuration-system.md#923-api-configuration)
- [9.2.4 Services Configuration](10-configuration-system.md#924-services-configuration)
- [9.2.4.1 Services Resilience Configuration](10-configuration-system.md#9241-services-resilience-configuration)
- [9.2.5 Zone Configuration (Nested Lists)](10-configuration-system.md#925-zone-configuration-nested-lists)
- [9.2.6 Client Configuration (Nested Lists)](10-configuration-system.md#926-client-configuration-nested-lists)
- [9.2.7 Radio Station Configuration (Nested Lists)](10-configuration-system.md#927-radio-station-configuration-nested-lists)
- [9.3 Configuration Classes](10-configuration-system.md#93-configuration-classes)
- [9.3.1 Root Configuration Class](10-configuration-system.md#931-root-configuration-class)
- [9.3.2 API Configuration](10-configuration-system.md#932-api-configuration)
- [9.3.3 System Configuration](10-configuration-system.md#933-system-configuration)
- [9.3.4 Zone Configuration](10-configuration-system.md#934-zone-configuration)
- [9.3.5 Client Configuration](10-configuration-system.md#935-client-configuration)
- [9.3.6 SoundFlow Configuration](10-configuration-system.md#936-soundflow-configuration)
- [9.4 Custom Type Converters](10-configuration-system.md#94-custom-type-converters)
- [9.4.1 KNX Address Converter](10-configuration-system.md#941-knx-address-converter)
- [9.5 Configuration Validation](10-configuration-system.md#95-configuration-validation)
- [9.5.1 Business Logic Validation](10-configuration-system.md#951-business-logic-validation)
- [9.6 Dependency Injection Setup](10-configuration-system.md#96-dependency-injection-setup)
- [9.6.1 Configuration Registration](10-configuration-system.md#961-configuration-registration)
- [9.7 Configuration Benefits](10-configuration-system.md#97-configuration-benefits)
- [9.7.1 Type Safety & Validation](10-configuration-system.md#971-type-safety-validation)
- [9.7.2 Developer Experience](10-configuration-system.md#972-developer-experience)
- [9.7.3 Operational Benefits](10-configuration-system.md#973-operational-benefits)
- [9.7.4 Maintainability](10-configuration-system.md#974-maintainability)

10. [API Specification](11-api-specification.md#10-api-specification)

- [10.1 API Design Philosophy](11-api-specification.md#101-api-design-philosophy)
- [10.2 Authentication and Authorization](11-api-specification.md#102-authentication-and-authorization)
- [10.3 Server Configuration](11-api-specification.md#103-server-configuration)
- [10.4 API Structure (`/api/v1/`)](11-api-specification.md#104-api-structure-apiv1)
- [10.4.1 Global Endpoints](11-api-specification.md#1041-global-endpoints)
- [10.4.2 Zone Endpoints](11-api-specification.md#1042-zone-endpoints)
- [10.4.3 Client Endpoints](11-api-specification.md#1043-client-endpoints)
- [10.4.4 Media Management Endpoints](11-api-specification.md#1044-media-management-endpoints)
- [10.5 Request and Response Format](11-api-specification.md#105-request-and-response-format)
- [10.5.1 Modern Direct Response Design](11-api-specification.md#1051-modern-direct-response-design)
- [10.5.2 Legacy Response Wrapper (Deprecated)](11-api-specification.md#1052-legacy-response-wrapper-deprecated)
- [10.6 HTTP Status Codes](11-api-specification.md#106-http-status-codes)
- [10.7 Pagination, Filtering, and Sorting](11-api-specification.md#107-pagination-filtering-and-sorting)
- [10.8 Webhooks and Event Streams (Optional / Future)](11-api-specification.md#108-webhooks-and-event-streams-optional-future)
- [10.9 HATEOAS Links (Optional)](11-api-specification.md#109-hateoas-links-optional)
- [10.10 API Implementation Notes](11-api-specification.md#1010-api-implementation-notes)
- [10.11 API Versioning](11-api-specification.md#1011-api-versioning)
- [10.12 API Documentation (Swagger/OpenAPI)](11-api-specification.md#1012-api-documentation-swaggeropenapi)

11. [Infrastructure Services Implementation](12-infrastructure-services-implementation.md#11-infrastructure-services-implementation)

- [11.1 Snapcast Integration (`/Infrastructure/Snapcast/`)](12-infrastructure-services-implementation.md#111-snapcast-integration-infrastructuresnapcast)
- [11.1.1 `SnapcastService`](12-infrastructure-services-implementation.md#1111-snapcastservice)
- [11.1.2 `SnapcastStateRepository`](12-infrastructure-services-implementation.md#1112-snapcaststaterepository)
- [11.2 KNX Integration (`/Infrastructure/Knx/KnxService.cs`)](12-infrastructure-services-implementation.md#112-knx-integration-infrastructureknxknxservicecs)
- [11.3 MQTT Integration (`/Infrastructure/Mqtt/MqttService.cs`)](12-infrastructure-services-implementation.md#113-mqtt-integration-infrastructuremqttmqttservicecs)
- [11.4 Subsonic Integration (`/Infrastructure/Subsonic/SubsonicService.cs`)](12-infrastructure-services-implementation.md#114-subsonic-integration-infrastructuresubsonicsubsonicservicecs)
- [11.5 Media Playback (`/Infrastructure/Audio/MediaPlayerService.cs`)](12-infrastructure-services-implementation.md#115-media-playback-infrastructureaudiomediaplayerservicecs)

12. [Metrics and Telemetry (Infrastructure Layer)](13-metrics-and-telemetry-infrastructure-layer.md#12-metrics-and-telemetry-infrastructure-layer)

- [12.1 Overview](13-metrics-and-telemetry-infrastructure-layer.md#121-overview)
- [12.2 Scope](13-metrics-and-telemetry-infrastructure-layer.md#122-scope)
- [12.3 Telemetry Types](13-metrics-and-telemetry-infrastructure-layer.md#123-telemetry-types)
- [12.4 OpenTelemetry Setup (DI / `/Worker/DI/ObservabilityExtensions.cs`)](13-metrics-and-telemetry-infrastructure-layer.md#124-opentelemetry-setup-di-workerdiobservabilityextensionscs)
- [12.5 Custom Metrics (`IMetricsService` / `OpenTelemetryMetricsService`)](13-metrics-and-telemetry-infrastructure-layer.md#125-custom-metrics-imetricsservice-opentelemetrymetricsservice)
- [12.6 Manual Tracing Instrumentation](13-metrics-and-telemetry-infrastructure-layer.md#126-manual-tracing-instrumentation)
- [12.7 Logging Correlation](13-metrics-and-telemetry-infrastructure-layer.md#127-logging-correlation)

13. [Zone-to-Client Mapping Strategy (Server Layer)](14-zone-to-client-mapping-strategy-server-layer.md#13-zone-to-client-mapping-strategy-server-layer)

- [13.1 Overview](14-zone-to-client-mapping-strategy-server-layer.md#131-overview)
- [13.2 Core Principles](14-zone-to-client-mapping-strategy-server-layer.md#132-core-principles)
- [13.3 Implementation (`ZoneManager`, `ClientManager`, `SnapcastService`)](14-zone-to-client-mapping-strategy-server-layer.md#133-implementation-zonemanager-clientmanager-snapcastservice)
- [13.3.1 `ZoneManager` (/Server/Managers/ZoneManager.cs)](14-zone-to-client-mapping-strategy-server-layer.md#1331-zonemanager-servermanagerszonemanagercs)
- [13.3.2 `ClientManager` (/Server/Managers/ClientManager.cs)](14-zone-to-client-mapping-strategy-server-layer.md#1332-clientmanager-servermanagersclientmanagercs)
- [13.3.3 `SnapcastService` (/Infrastructure/Snapcast/SnapcastService.cs)](14-zone-to-client-mapping-strategy-server-layer.md#1333-snapcastservice-infrastructuresnapcastsnapcastservicecs)
- [13.4 Cortex.Mediator Notifications for Synchronization](14-zone-to-client-mapping-strategy-server-layer.md#134-cortexmediator-notifications-for-synchronization)
- [13.5 Data Contracts (`ClientState`, `ZoneState`)](14-zone-to-client-mapping-strategy-server-layer.md#135-data-contracts-clientstate-zonestate)
- [13.6 Registration in DI Container](14-zone-to-client-mapping-strategy-server-layer.md#136-registration-in-di-container)

14. [Command Framework](15-command-framework.md#14-command-framework)

- [14.1 Overview of Command Structure](15-command-framework.md#141-overview-of-command-structure)
- [14.2 Global Commands and Status](15-command-framework.md#142-global-commands-and-status)
- [14.2.1 Global Functionality (Status Only)](15-command-framework.md#1421-global-functionality-status-only)
- [14.2.2 Global MQTT Implementation](15-command-framework.md#1422-global-mqtt-implementation)
- [14.2.3 Global MQTT Last Will and Testament (LWT)](15-command-framework.md#1423-global-mqtt-last-will-and-testament-lwt)
- [14.3 Zone Commands and Status](15-command-framework.md#143-zone-commands-and-status)
- [14.3.1 Zone Functionality](15-command-framework.md#1431-zone-functionality)
- [14.3.2 Zone MQTT Implementation](15-command-framework.md#1432-zone-mqtt-implementation)
- [14.3.2.1 Zone Command Topics](15-command-framework.md#14321-zone-command-topics)
- [14.3.2.2 Zone Status Topics (Read-Only)](15-command-framework.md#14322-zone-status-topics-read-only)
- [14.3.2.3 Payloads for `{zoneBaseTopic}control/set`](15-command-framework.md#14323-payloads-for-zonebasetopiccontrolset)
- [14.3.2.4 Status Values for `{zoneBaseTopic}control`](15-command-framework.md#14324-status-values-for-zonebasetopiccontrol)
- [14.3.3 Zone KNX Implementation](15-command-framework.md#1433-zone-knx-implementation)
- [14.3.3.1 KNX Zone Command Group Addresses](15-command-framework.md#14331-knx-zone-command-group-addresses)
- [14.3.3.2 KNX Zone Status Group Addresses](15-command-framework.md#14332-knx-zone-status-group-addresses)
- [14.4 Client Commands and Status](15-command-framework.md#144-client-commands-and-status)
- [14.4.1 Client Functionality](15-command-framework.md#1441-client-functionality)
- [14.4.2 Client MQTT Implementation](15-command-framework.md#1442-client-mqtt-implementation)
- [14.4.2.1 Client Command Topics (`/set`)](15-command-framework.md#14421-client-command-topics-set)
- [14.4.2.2 Client Status Topics (Read-Only)](15-command-framework.md#14422-client-status-topics-read-only)
- [14.4.3 Client KNX Implementation](15-command-framework.md#1443-client-knx-implementation)
- [14.4.3.1 KNX Client Command Group Addresses](15-command-framework.md#14431-knx-client-command-group-addresses)
- [14.4.3.2 KNX Client Status Group Addresses](15-command-framework.md#14432-knx-client-status-group-addresses)
- [14.5 Zone and Client State Objects (JSON Examples)](15-command-framework.md#145-zone-and-client-state-objects-json-examples)
- [14.5.1 Complete Zone State (JSON)](15-command-framework.md#1451-complete-zone-state-json)
- [14.5.2 Complete Client State (JSON)](15-command-framework.md#1452-complete-client-state-json)

15. [Cortex.Mediator Implementation (Server Layer)](16-mediator-implementation-server-layer.md#15-cortexmediator-implementation-server-layer)

- [15.1 Cortex.Mediator Integration and Configuration](16-mediator-implementation-server-layer.md#151-cortexmediator-integration-and-configuration)
- [15.2 Command, Query, and Notification Structure](16-mediator-implementation-server-layer.md#152-command-query-and-notification-structure)
- [15.2.1 Command Example](16-mediator-implementation-server-layer.md#1521-command-example)
- [15.2.2 Query Example](16-mediator-implementation-server-layer.md#1522-query-example)
- [15.2.3 Notification Example](16-mediator-implementation-server-layer.md#1523-notification-example)
- [15.3 Command Validation with FluentValidation](16-mediator-implementation-server-layer.md#153-command-validation-with-fluentvalidation)
- [15.4 Pipeline Behaviors (`/Server/Behaviors`)](16-mediator-implementation-server-layer.md#154-pipeline-behaviors-serverbehaviors)
- [15.4.1 Logging Behavior](16-mediator-implementation-server-layer.md#1541-logging-behavior)
- [15.4.2 Validation Behavior](16-mediator-implementation-server-layer.md#1542-validation-behavior)
- [15.4.3 Performance Behavior](16-mediator-implementation-server-layer.md#1543-performance-behavior)
- [15.5 Communication Layer Integration](16-mediator-implementation-server-layer.md#155-communication-layer-integration)
- [15.6 Status Update Mechanism](16-mediator-implementation-server-layer.md#156-status-update-mechanism)

16. [Cortex.Mediator Command Framework Implementation](16a-cortex-mediator-command-implementation.md#16-cortexmediator-command-framework-implementation)

- [16.1 Implementation Overview](16a-cortex-mediator-command-implementation.md#161-implementation-overview)
- [16.2 Project Structure](16a-cortex-mediator-command-implementation.md#162-project-structure)
- [16.3 Base Interfaces and Common Types](16a-cortex-mediator-command-implementation.md#163-base-interfaces-and-common-types)
- [16.3.1 Command Result Types](16a-cortex-mediator-command-implementation.md#1631-command-result-types)
- [16.3.2 Common Enums](16a-cortex-mediator-command-implementation.md#1632-common-enums)
- [16.4 Global Commands and Queries](16a-cortex-mediator-command-implementation.md#164-global-commands-and-queries)
- [16.4.1 Global Status Queries](16a-cortex-mediator-command-implementation.md#1641-global-status-queries)
- [16.4.2 Global Query Handlers](16a-cortex-mediator-command-implementation.md#1642-global-query-handlers)
- [16.5 Zone Commands](16a-cortex-mediator-command-implementation.md#165-zone-commands)
- [16.5.1 Playback Control Commands](16a-cortex-mediator-command-implementation.md#1651-playback-control-commands)
- [16.6 Status Notifications](16a-cortex-mediator-command-implementation.md#166-status-notifications)
- [16.6.1 Global Status Notifications](16a-cortex-mediator-command-implementation.md#1661-global-status-notifications)
- [16.7 Command Validators](16a-cortex-mediator-command-implementation.md#167-command-validators)
- [16.7.1 Zone Command Validators](16a-cortex-mediator-command-implementation.md#1671-zone-command-validators)

17. [Zone Commands Implementation](16b-zone-commands-implementation.md#17-zone-commands-implementation)

- [17.1 Volume and Mute Commands](16b-zone-commands-implementation.md#171-volume-and-mute-commands)
- [17.2 Track Management Commands](16b-zone-commands-implementation.md#172-track-management-commands)
- [17.3 Playlist Management Commands](16b-zone-commands-implementation.md#173-playlist-management-commands)
- [17.4 Zone Command Validators](16b-zone-commands-implementation.md#174-zone-command-validators)
- [17.5 Zone Command Handlers](16b-zone-commands-implementation.md#175-zone-command-handlers)

18. [Client Commands Implementation](16c-client-commands-implementation.md#18-client-commands-implementation)

- [18.1 Client Volume and Mute Commands](16c-client-commands-implementation.md#181-client-volume-and-mute-commands)
- [18.2 Client Configuration Commands](16c-client-commands-implementation.md#182-client-configuration-commands)
- [18.3 Client Command Validators](16c-client-commands-implementation.md#183-client-command-validators)
- [18.4 Client Command Handlers](16c-client-commands-implementation.md#184-client-command-handlers)
- [18.5 Client Queries](16c-client-commands-implementation.md#185-client-queries)
- [18.6 Client Query Handlers](16c-client-commands-implementation.md#186-client-query-handlers)

19. [Zone Queries and Status Notifications](16d-queries-and-notifications.md#19-zone-queries-and-status-notifications)

- [19.1 Zone Queries](16d-queries-and-notifications.md#191-zone-queries)
- [19.2 Zone Query Handlers](16d-queries-and-notifications.md#192-zone-query-handlers)
- [19.3 Status Notifications](16d-queries-and-notifications.md#193-status-notifications)
- [19.3.1 Zone Status Notifications](16d-queries-and-notifications.md#1931-zone-status-notifications)
- [19.3.2 Client Status Notifications](16d-queries-and-notifications.md#1932-client-status-notifications)
- [19.4 Generic Status Changed Notification](16d-queries-and-notifications.md#194-generic-status-changed-notification)
- [19.5 Notification Handlers Example](16d-queries-and-notifications.md#195-notification-handlers-example)

20. [Integration and Implementation Summary](16e-integration-and-summary.md#20-integration-and-implementation-summary)

- [20.1 Infrastructure Adapter Integration](16e-integration-and-summary.md#201-infrastructure-adapter-integration)
- [20.1.1 MQTT Service Integration](16e-integration-and-summary.md#2011-mqtt-service-integration)
- [20.1.2 KNX Service Integration](16e-integration-and-summary.md#2012-knx-service-integration)
- [20.1.3 API Controller Integration](16e-integration-and-summary.md#2013-api-controller-integration)
- [20.2 Dependency Injection Configuration](16e-integration-and-summary.md#202-dependency-injection-configuration)
- [20.3 Testing Strategy](16e-integration-and-summary.md#203-testing-strategy)
- [20.3.1 Unit Tests for Commands and Handlers](16e-integration-and-summary.md#2031-unit-tests-for-commands-and-handlers)
- [20.3.2 Integration Tests](16e-integration-and-summary.md#2032-integration-tests)
- [20.4 Overview](16e-integration-and-summary.md#204-overview)
- [20.4.1 Key Benefits](16e-integration-and-summary.md#2041-key-benefits)
- [20.4.2 Implementation Plan](16e-integration-and-summary.md#2042-implementation-plan)

21. [Testing Strategy](18-testing-strategy.md#21-testing-strategy)

- [21.1 Test Types and Goals](18-testing-strategy.md#211-test-types-and-goals)
- [21.2 Specific Component Testing Approaches](18-testing-strategy.md#212-specific-component-testing-approaches)
- [21.3 Specific Test Scenario Examples](18-testing-strategy.md#213-specific-test-scenario-examples)
- [21.4 Supporting Strategies](18-testing-strategy.md#214-supporting-strategies)

22. [Dependencies](20-dependencies.md#22-dependencies)

- [22.1 .NET Framework](20-dependencies.md#221-net-framework)
- [22.2 Core NuGet Packages](20-dependencies.md#222-core-nuget-packages)
- [22.2.1 Application Framework & Utilities](20-dependencies.md#2221-application-framework-utilities)
- [22.2.2 Resilience](20-dependencies.md#2222-resilience)
- [22.2.3 Logging](20-dependencies.md#2223-logging)
- [22.2.4 External System Integration](20-dependencies.md#2224-external-system-integration)
- [22.2.5 Observability (OpenTelemetry)](20-dependencies.md#2225-observability-opentelemetry)
- [22.2.6 Code Quality & Analysis](20-dependencies.md#2226-code-quality-analysis)
- [22.2.7 Testing Dependencies](20-dependencies.md#2227-testing-dependencies)
- [22.3 Centralized Package Management (`Directory.Packages.props`)](20-dependencies.md#223-centralized-package-management-directorypackagesprops)
- [22.4 Dependency Management Strategy](20-dependencies.md#224-dependency-management-strategy)
- [22.5 Native Dependencies](20-dependencies.md#225-native-dependencies)

23. [Achieving High-Quality Code (AI & Human Collaboration)](21-achieving-high-quality-code-ai-human-collaboration.md#23-achieving-high-quality-code-ai-human-collaboration)

24. [DRY Transformation Architecture](22-dry-transformation-architecture.md#24-dry-transformation-architecture)

- [24.1 Overview](22-dry-transformation-architecture.md#241-overview)
- [24.2 Architectural Principles](22-dry-transformation-architecture.md#242-architectural-principles)
- [24.2.1 Single Source of Truth](22-dry-transformation-architecture.md#2421-single-source-of-truth)
- [24.2.2 Type Safety](22-dry-transformation-architecture.md#2422-type-safety)
- [24.2.3 Blueprint Integration](22-dry-transformation-architecture.md#2423-blueprint-integration)
- [24.2.4 Developer Experience](22-dry-transformation-architecture.md#2424-developer-experience)
- [24.3 Attribute System Architecture](22-dry-transformation-architecture.md#243-attribute-system-architecture)
- [24.3.1 StatusIdAttribute](22-dry-transformation-architecture.md#2431-statusidattribute)
- [24.3.2 CommandIdAttribute](22-dry-transformation-architecture.md#2432-commandidattribute)
- [24.4 Implementation Categories](22-dry-transformation-architecture.md#244-implementation-categories)
- [24.4.1 Notification System (19 Classes)](22-dry-transformation-architecture.md#2441-notification-system-19-classes)
- [24.4.1.1 Client Notifications (6 Classes)](22-dry-transformation-architecture.md#24411-client-notifications-6-classes)
- [24.4.1.2 Zone Notifications (8 Classes)](22-dry-transformation-architecture.md#24412-zone-notifications-8-classes)
- [24.4.1.3 Global Notifications (4 Classes)](22-dry-transformation-architecture.md#24413-global-notifications-4-classes)
- [24.4.1.4 Generic Infrastructure (1 Class)](22-dry-transformation-architecture.md#24414-generic-infrastructure-1-class)
- [24.4.2 Command System (22 Classes)](22-dry-transformation-architecture.md#2442-command-system-22-classes)
- [24.4.2.1 Client Commands (3 Classes)](22-dry-transformation-architecture.md#24421-client-commands-3-classes)
- [24.4.2.2 Zone Playback Commands (3 Classes)](22-dry-transformation-architecture.md#24422-zone-playback-commands-3-classes)
- [24.4.2.3 Zone Volume Commands (4 Classes)](22-dry-transformation-architecture.md#24423-zone-volume-commands-4-classes)
- [24.4.2.4 Zone Track Commands (5 Classes)](22-dry-transformation-architecture.md#24424-zone-track-commands-5-classes)
- [24.4.2.5 Zone Playlist Commands (7 Classes)](22-dry-transformation-architecture.md#24425-zone-playlist-commands-7-classes)
- [24.5 Integration Patterns](22-dry-transformation-architecture.md#245-integration-patterns)
- [24.5.1 Notification Handler Pattern](22-dry-transformation-architecture.md#2451-notification-handler-pattern)
- [24.5.2 Command Processing Pattern](22-dry-transformation-architecture.md#2452-command-processing-pattern)
- [24.6 Quality Assurance](22-dry-transformation-architecture.md#246-quality-assurance)
- [24.6.1 Compile-Time Validation](22-dry-transformation-architecture.md#2461-compile-time-validation)
- [24.6.2 Runtime Validation](22-dry-transformation-architecture.md#2462-runtime-validation)
- [24.6.3 Refactoring Safety](22-dry-transformation-architecture.md#2463-refactoring-safety)
- [24.7 Blueprint Reference System](22-dry-transformation-architecture.md#247-blueprint-reference-system)
- [24.7.1 Reference Format](22-dry-transformation-architecture.md#2471-reference-format)
- [24.7.2 Category Mapping](22-dry-transformation-architecture.md#2472-category-mapping)
- [24.8 Benefits and Outcomes](22-dry-transformation-architecture.md#248-benefits-and-outcomes)
- [24.8.1 Code Quality Metrics](22-dry-transformation-architecture.md#2481-code-quality-metrics)
- [24.8.2 Developer Experience](22-dry-transformation-architecture.md#2482-developer-experience)
- [24.8.3 Maintainability](22-dry-transformation-architecture.md#2483-maintainability)
- [24.9 Future Extensibility](22-dry-transformation-architecture.md#249-future-extensibility)
- [24.9.1 Adding New Notifications](22-dry-transformation-architecture.md#2491-adding-new-notifications)
- [24.9.2 Adding New Commands](22-dry-transformation-architecture.md#2492-adding-new-commands)
- [24.9.3 Validation Enhancements](22-dry-transformation-architecture.md#2493-validation-enhancements)
- [24.10 Enhanced StatusId System Architecture](22-dry-transformation-architecture.md#2410-enhanced-statusid-system-architecture)
- [24.10.1 Multi-Layered DRY Approach](22-dry-transformation-architecture.md#24101-multi-layered-dry-approach)
- [24.10.2 StatusIdRegistry Implementation](22-dry-transformation-architecture.md#24102-statusidregistry-implementation)
- [24.10.3 StatusIds Constants Class](22-dry-transformation-architecture.md#24103-statusids-constants-class)
- [24.10.4 StatusEventType Enum System](22-dry-transformation-architecture.md#24104-statuseventtype-enum-system)
- [24.10.5 Enhanced MqttService Integration](22-dry-transformation-architecture.md#24105-enhanced-mqttservice-integration)
- [24.10.6 Usage Patterns and Best Practices](22-dry-transformation-architecture.md#24106-usage-patterns-and-best-practices)
- [24.10.6.1 Constants Approach (Recommended for Simple Cases)](22-dry-transformation-architecture.md#241061-constants-approach-recommended-for-simple-cases)
- [24.10.6.2 Enum Approach (Best for Complex Logic)](22-dry-transformation-architecture.md#241062-enum-approach-best-for-complex-logic)
- [24.10.6.3 Registry Approach (Dynamic Scenarios)](22-dry-transformation-architecture.md#241063-registry-approach-dynamic-scenarios)
- [24.10.7 System Benefits and Metrics](22-dry-transformation-architecture.md#24107-system-benefits-and-metrics)
- [24.10.7.1 Code Quality Improvements](22-dry-transformation-architecture.md#241071-code-quality-improvements)
- [24.10.7.2 Performance Characteristics](22-dry-transformation-architecture.md#241072-performance-characteristics)
- [24.10.7.3 Developer Experience Enhancements](22-dry-transformation-architecture.md#241073-developer-experience-enhancements)
- [24.10.8 Extension and Maintenance](22-dry-transformation-architecture.md#24108-extension-and-maintenance)
- [24.10.8.1 Adding New Status Types](22-dry-transformation-architecture.md#241081-adding-new-status-types)
- [24.10.8.2 Validation and Testing](22-dry-transformation-architecture.md#241082-validation-and-testing)
- [24.10.9 Architecture Decision Records](22-dry-transformation-architecture.md#24109-architecture-decision-records)
- [24.10.9.1 Why Three Approaches?](22-dry-transformation-architecture.md#241091-why-three-approaches)
- [24.10.9.2 Performance Considerations](22-dry-transformation-architecture.md#241092-performance-considerations)
- [24.10.9.3 Maintenance Strategy](22-dry-transformation-architecture.md#241093-maintenance-strategy)
- [24.11 CommandId DRY System Architecture](22-dry-transformation-architecture.md#2411-commandid-dry-system-architecture)
- [24.11.1 Comprehensive Command Management](22-dry-transformation-architecture.md#24111-comprehensive-command-management)
- [24.11.2 Blueprint Compliance](22-dry-transformation-architecture.md#24112-blueprint-compliance)
- [24.11.2.1 Zone Commands (19 total)](22-dry-transformation-architecture.md#241121-zone-commands-19-total)
- [24.11.2.2 Client Commands (6 total)](22-dry-transformation-architecture.md#241122-client-commands-6-total)
- [24.11.3 Architectural Symmetry](22-dry-transformation-architecture.md#24113-architectural-symmetry)
- [24.11.4 Implementation Benefits](22-dry-transformation-architecture.md#24114-implementation-benefits)
- [24.12 Conclusion](22-dry-transformation-architecture.md#2412-conclusion)

25. [Deployment and Operations](23-deployment-and-operations.md#25-deployment-and-operations)

- [25.1 Deployment Options](23-deployment-and-operations.md#251-deployment-options)
- [25.1.1 Docker Deployment (Recommended)](23-deployment-and-operations.md#2511-docker-deployment-recommended)
- [25.1.2 Kubernetes Deployment](23-deployment-and-operations.md#2512-kubernetes-deployment)
- [25.1.3 Bare Metal / Virtual Machine Deployment](23-deployment-and-operations.md#2513-bare-metal-virtual-machine-deployment)
- [25.2 Monitoring and Observability](23-deployment-and-operations.md#252-monitoring-and-observability)
- [25.2.1 Logging](23-deployment-and-operations.md#2521-logging)
- [25.2.2 Metrics](23-deployment-and-operations.md#2522-metrics)
- [25.2.3 Distributed Tracing](23-deployment-and-operations.md#2523-distributed-tracing)
- [25.2.4 Health Checks](23-deployment-and-operations.md#2524-health-checks)
- [25.3 Operational Procedures](23-deployment-and-operations.md#253-operational-procedures)
- [25.3.1 Deployment/Update Process (Docker Compose Example)](23-deployment-and-operations.md#2531-deploymentupdate-process-docker-compose-example)
- [25.3.2 Configuration Updates](23-deployment-and-operations.md#2532-configuration-updates)
- [25.3.3 Backup and Restore](23-deployment-and-operations.md#2533-backup-and-restore)
- [25.3.4 Troubleshooting](23-deployment-and-operations.md#2534-troubleshooting)
- [25.3.5 Scaling](23-deployment-and-operations.md#2535-scaling)
- [25.4 Security Considerations](23-deployment-and-operations.md#254-security-considerations)
- [25.4.1 Network Security](23-deployment-and-operations.md#2541-network-security)
- [25.4.2 Authentication and Authorization](23-deployment-and-operations.md#2542-authentication-and-authorization)
- [25.4.3 Secrets Management](23-deployment-and-operations.md#2543-secrets-management)

26. [Docker Infrastructure](25-docker-infrastructure.md#26-docker-infrastructure)

- [26.1 Container Architecture Overview](25-docker-infrastructure.md#261-container-architecture-overview)
- [26.2 `snapserver` Container Customization](25-docker-infrastructure.md#262-snapserver-container-customization)
- [26.3 `snapdog` Container (`/docker/snapdog/Dockerfile`)](25-docker-infrastructure.md#263-snapdog-container-dockersnapdogdockerfile)
- [26.4 Docker Compose Configuration (Production Example)](25-docker-infrastructure.md#264-docker-compose-configuration-production-example)
- [26.5 Docker Compose Profiles](25-docker-infrastructure.md#265-docker-compose-profiles)

27. [Appendices](30-appendices.md#27-appendices)

- [27.1 Glossary](30-appendices.md#271-glossary)
- [27.2 References](30-appendices.md#272-references)
- [27.2.1 External Systems & Libraries](30-appendices.md#2721-external-systems-libraries)
- [27.2.2 .NET & Core Libraries](30-appendices.md#2722-net-core-libraries)
- [27.2.3 Analysis & Style Tools](30-appendices.md#2723-analysis-style-tools)
- [27.2.4 Design Patterns & Principles](30-appendices.md#2724-design-patterns-principles)
- [27.3 KNX DPT Value Mapping Summary](30-appendices.md#273-knx-dpt-value-mapping-summary)
- [27.4 Error Codes Reference](30-appendices.md#274-error-codes-reference)

28. [Table of Contents](index.md#28-table-of-contents)

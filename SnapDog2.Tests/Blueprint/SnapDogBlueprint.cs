//
// SnapDog
// The Snapcast-based Smart Home Audio System with MQTT & KNX integration
// Copyright (C) 2025 Fabian Schmieder
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program. If not, see <https://www.gnu.org/licenses/>.
//
namespace SnapDog2.Tests.Blueprint;

using SnapDog2.Api.Models;
using SnapDog2.Shared.Models;

/// <summary>
/// Complete SnapDog2 system specification as fluent blueprint.
/// Single source of truth for all commands, status, protocols, and implementation requirements.
/// </summary>
public static class SnapDogBlueprint
{
    public static readonly Blueprint Spec = Blueprint
        .Define()
        // === ZONE PLAYBACK COMMANDS ===
        //
        .Command("PLAY")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/play")
        .Knx()
        .Post("/api/v1/zones/{zoneIndex:int}/play")
        .Description("Start playback in a zone")
        //
        .Command("PAUSE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/pause")
        .Knx()
        .Post("/api/v1/zones/{zoneIndex:int}/pause")
        .Description("Pause playback in a zone")
        //
        .Command("STOP")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/stop")
        .Knx()
        .Post("/api/v1/zones/{zoneIndex:int}/stop")
        .Description("Stop playback in a zone")
        //
        // === CONFIGURATION QUERIES ===
        //
        .Status("ZONE_COUNT")
        .Global()
        .Get("/api/v1/zones/count")
        .ApiReturns<int>()
        .Description("Get total number of configured zones")
        .Exclude(Protocol.SignalR, "Count values are static configuration data")
        //
        .Status("CLIENT_COUNT")
        .Global()
        .Get("/api/v1/clients/count")
        .ApiReturns<int>()
        .Description("Get total number of configured clients")
        .Exclude(Protocol.SignalR, "Count values are static configuration data")
        //
        // === VOLUME COMMANDS ===
        //
        .Command("VOLUME")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/volume/set")
        .Put("/api/v1/zones/{zoneIndex:int}/volume")
        .ApiReturns<int>()
        .ApiReturns<int>()
        .Description("Set zone volume to specific level")
        .Exclude(Protocol.Knx, "Handled by dedicated KNX volume actuators")
        //
        .Command("VOLUME_UP")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/volume/up")
        .Post("/api/v1/zones/{zoneIndex:int}/volume/up")
        .ApiReturns<int>()
        .ApiReturns<int>()
        .Description("Increase zone volume")
        .Exclude(Protocol.Knx, "Handled by dedicated KNX volume actuators")
        //
        .Command("VOLUME_DOWN")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/volume/down")
        .Post("/api/v1/zones/{zoneIndex:int}/volume/down")
        .ApiReturns<int>()
        .ApiReturns<int>()
        .Description("Decrease zone volume")
        .Exclude(Protocol.Knx, "Handled by dedicated KNX volume actuators")
        //
        // === MUTE COMMANDS ===
        //
        .Command("MUTE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/mute/set")
        .Put("/api/v1/zones/{zoneIndex:int}/mute")
        .ApiReturns<bool>()
        .ApiReturns<bool>()
        .Description("Set zone mute state")
        .Exclude(Protocol.Knx, "Handled by dedicated KNX mute actuators")
        //
        .Command("MUTE_TOGGLE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/mute/toggle")
        .Post("/api/v1/zones/{zoneIndex:int}/mute/toggle")
        .ApiReturns<bool>()
        .ApiReturns<bool>()
        .Description("Toggle zone mute state")
        .Exclude(Protocol.Knx, "Toggle commands require state synchronization")
        //
        // === TRACK COMMANDS ===
        //
        .Command("TRACK")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/set")
        .Put("/api/v1/zones/{zoneIndex:int}/track")
        .Description("Set current track by index")
        .Exclude(Protocol.Knx, "Complex track navigation not suitable for building automation")
        //
        .Command("TRACK_NEXT")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/next")
        .Post("/api/v1/zones/{zoneIndex:int}/next")
        .ApiReturns<int>()
        .Description("Skip to next track")
        .Exclude(Protocol.Knx, "Complex track navigation not suitable for building automation")
        //
        .Command("TRACK_PREVIOUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/previous")
        .Post("/api/v1/zones/{zoneIndex:int}/previous")
        .ApiReturns<int>()
        .Description("Skip to previous track")
        .Exclude(Protocol.Knx, "Complex track navigation not suitable for building automation")
        //
        .Command("TRACK_PLAY_INDEX")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/play/track")
        .Knx()
        .Post("/api/v1/zones/{zoneIndex:int}/play/track")
        .Description("Play specific track by index")
        //
        .Command("TRACK_PLAY_URL")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/play/url")
        .Post("/api/v1/zones/{zoneIndex:int}/play/url")
        .Description("Play direct URL stream")
        .Exclude(Protocol.Knx, "KNX cannot transmit URL strings effectively")
        //
        .Command("TRACK_PLAY_PLAYLIST")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/play/playlist/{playlistIndex}/track")
        .Knx()
        .Post("/api/v1/zones/{zoneIndex:int}/play/playlist/{playlistIndex:int}/track")
        .Description("Play specific track from specific playlist")
        //
        .Command("TRACK_POSITION")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/position/set")
        .Put("/api/v1/zones/{zoneIndex:int}/track/position")
        .Description("Seek to position in track")
        .Exclude(Protocol.Knx, "KNX lacks precision for millisecond-based seeking")
        //
        .Command("TRACK_PROGRESS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/progress/set")
        .Put("/api/v1/zones/{zoneIndex:int}/track/progress")
        .Description("Seek to progress percentage")
        .Exclude(Protocol.Knx, "KNX lacks precision for percentage-based seeking")
        //
        .Command("TRACK_REPEAT")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/repeat/track/set")
        .Knx()
        .Put("/api/v1/zones/{zoneIndex:int}/repeat/track")
        .Description("Set track repeat mode")
        //
        .Command("TRACK_REPEAT_TOGGLE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/repeat/track/toggle")
        .Knx()
        .Post("/api/v1/zones/{zoneIndex:int}/repeat/track/toggle")
        .Description("Toggle track repeat mode")
        //
        // === PLAYLIST COMMANDS ===
        //
        .Command("PLAYLIST")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/playlist/set")
        .Put("/api/v1/zones/{zoneIndex:int}/playlist")
        .Description("Set current playlist")
        //
        .Command("PLAYLIST_NEXT")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/next/playlist")
        .Post("/api/v1/zones/{zoneIndex:int}/next/playlist")
        .ApiReturns<int>()
        .Description("Switch to next playlist")
        .Exclude(Protocol.Knx, "Complex playlist navigation not suitable for building automation")
        //
        .Command("PLAYLIST_PREVIOUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/previous/playlist")
        .Post("/api/v1/zones/{zoneIndex:int}/previous/playlist")
        .ApiReturns<int>()
        .Description("Switch to previous playlist")
        .Exclude(Protocol.Knx, "Complex playlist navigation not suitable for building automation")
        //
        .Command("PLAYLIST_SHUFFLE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/shuffle/set")
        .Put("/api/v1/zones/{zoneIndex:int}/shuffle")
        .Description("Set playlist shuffle mode")
        .Exclude(Protocol.Knx, "Complex state management not suitable for KNX")
        //
        .Command("PLAYLIST_SHUFFLE_TOGGLE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/shuffle/toggle")
        .Post("/api/v1/zones/{zoneIndex:int}/shuffle/toggle")
        .Description("Toggle playlist shuffle mode")
        .Exclude(Protocol.Knx, "Toggle commands require state synchronization")
        //
        .Command("PLAYLIST_REPEAT")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/repeat/playlist/set")
        .Knx()
        .Put("/api/v1/zones/{zoneIndex:int}/repeat")
        .Description("Set playlist repeat mode")
        //
        .Command("PLAYLIST_REPEAT_TOGGLE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/repeat/playlist/toggle")
        .Knx()
        .Post("/api/v1/zones/{zoneIndex:int}/repeat/toggle")
        .Description("Toggle playlist repeat mode")
        //
        // === CLIENT COMMANDS ===
        //
        .Command("CLIENT_VOLUME")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/volume/set")
        .Knx()
        .Put("/api/v1/clients/{clientIndex:int}/volume")
        .ApiReturns<int>()
        .Description("Set client volume level")
        //
        .Command("CLIENT_VOLUME_UP")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/volume/up")
        .Post("/api/v1/clients/{clientIndex:int}/volume/up")
        .ApiReturns<int>()
        .Description("Increase client volume")
        .Exclude(Protocol.Knx, "Client-specific network settings not suitable for building automation")
        //
        .Command("CLIENT_VOLUME_DOWN")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/volume/down")
        .Post("/api/v1/clients/{clientIndex:int}/volume/down")
        .ApiReturns<int>()
        .Description("Decrease client volume")
        .Exclude(Protocol.Knx, "Client-specific network settings not suitable for building automation")
        //
        .Command("CLIENT_MUTE")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/mute/set")
        .Knx()
        .Put("/api/v1/clients/{clientIndex:int}/mute")
        .ApiReturns<bool>()
        .Description("Set client mute state")
        //
        .Command("CLIENT_MUTE_TOGGLE")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/mute/toggle")
        .Post("/api/v1/clients/{clientIndex:int}/mute/toggle")
        .ApiReturns<bool>()
        .Description("Toggle client mute state")
        .Exclude(Protocol.Knx, "Client-specific network settings not suitable for building automation")
        //
        .Command("CLIENT_LATENCY")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/latency/set")
        .Put("/api/v1/clients/{clientIndex:int}/latency")
        .Description("Set client audio latency")
        .Exclude(Protocol.Knx, "Network-specific setting not suitable for building automation")
        //
        .Command("CLIENT_NAME")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/name/set")
        .Put("/api/v1/clients/{clientIndex:int}/name")
        .Description("Set client name")
        .Exclude(Protocol.Knx, "Client-specific network settings not suitable for building automation")
        //
        .Command("CLIENT_ZONE")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/zones/set")
        .Knx()
        .Put("/api/v1/clients/{clientIndex:int}/zone")
        .Description("Assign client to zone")
        //
        // === CONTROL COMMANDS ===
        //
        .Command("CONTROL")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/control/set")
        .Post("/api/v1/zones/{zoneIndex:int}/control")
        .Description("Set unified zone control state")
        .Exclude(Protocol.Knx, "Complex control state not suitable for KNX")
        //
        .Command("ZONE_NAME")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/name/set")
        .Put("/api/v1/zones/{zoneIndex:int}/name")
        .Description("Set zone name")
        .Exclude(Protocol.Knx, "KNX cannot transmit string names effectively")
        .Exclude(Protocol.Api, "API should not change zone name")
        //
        // === SYSTEM STATUS ===
        //
        .Status("SYSTEM_STATUS")
        .Global()
        .Mqtt("snapdog/system/status")
        .Get("/api/v1/system/status")
        .SignalR("SystemStatusChanged")
        .Description("Overall system health and status")
        .Exclude(Protocol.Knx, "Read-only system information not actionable via KNX")
        //
        .Status("VERSION_INFO")
        .Global()
        .Mqtt("snapdog/system/version")
        .Get("/api/v1/system/version")
        .Description("System version information")
        .Exclude(Protocol.SignalR, "Version information is static and doesn't need real-time updates")
        //
        .Status("SERVER_STATS")
        .Global()
        .Mqtt("snapdog/system/stats")
        .Get("/api/v1/system/stats")
        .Description("Server performance statistics")
        .Exclude(Protocol.SignalR, "Performance statistics are bulk data better suited for polling")
        //
        .Status("HEALTH_READY")
        .Global()
        .Get("/api/health/ready")
        .Description("Readiness probe for container orchestration")
        .Exclude(Protocol.SignalR, "Health checks are infrastructure concerns")
        .Exclude(Protocol.Mqtt, "Health checks are infrastructure concerns")
        .Exclude(Protocol.Knx, "Health checks are infrastructure concerns")
        //
        .Status("HEALTH_LIVE")
        .Global()
        .Get("/api/health/live")
        .Description("Liveness probe for container orchestration")
        .Exclude(Protocol.SignalR, "Health checks are infrastructure concerns")
        .Exclude(Protocol.Mqtt, "Health checks are infrastructure concerns")
        .Exclude(Protocol.Knx, "Health checks are infrastructure concerns")
        //
        .Status("ZONE_STATE")
        .Zone()
        .Get("/api/v1/zones/{zoneIndex:int}")
        .ApiReturns<ZoneState>()
        .Description("Complete zone state information")
        .Exclude(Protocol.SignalR, "Use individual zone events instead")
        .Exclude(Protocol.Mqtt, "Use individual zone status topics instead")
        .Exclude(Protocol.Knx, "Read-only endpoint not actionable via KNX")
        //
        .Status("ZONE_STATES")
        .Global()
        .Get("/api/v1/zones")
        .ApiReturns<Page<ZoneState>>()
        .Description("Information about all zones")
        .Exclude(Protocol.Knx, "Read-only system information not actionable via KNX")
        .Exclude(Protocol.Mqtt, "No single MQTT topic for all zones info")
        .Exclude(Protocol.SignalR, "Bulk zone data is heavy - use individual zone events instead")
        //
        .Status("CLIENT_STATES")
        .Global()
        .Get("/api/v1/clients")
        .ApiReturns<Page<ClientState>>()
        .Description("Information about all clients")
        .Exclude(Protocol.Knx, "Read-only system information not actionable via KNX")
        .Exclude(Protocol.Mqtt, "No single MQTT topic for all clients info")
        .Exclude(Protocol.SignalR, "Bulk client data is heavy - use individual client events instead")
        //
        // === MEDIA ENDPOINTS ===
        //
        .Status("MEDIA_PLAYLISTS")
        .Global()
        .Get("/api/v1/media/playlists")
        .Description("List of all available playlists")
        .Exclude(Protocol.Mqtt, "Media browsing not suitable for MQTT")
        .Exclude(Protocol.Knx, "Media browsing not suitable for KNX")
        .Exclude(Protocol.SignalR, "Playlist lists are bulk data better suited for on-demand fetching")
        //
        .Status("MEDIA_PLAYLIST_INFO")
        .Global()
        .Get("/api/v1/media/playlists/{playlistIndex}")
        .Description("Detailed information about a specific playlist")
        .Exclude(Protocol.Mqtt, "Media browsing not suitable for MQTT")
        .Exclude(Protocol.Knx, "Media browsing not suitable for KNX")
        .Exclude(Protocol.SignalR, "Playlist metadata is static and fetched on-demand")
        //
        .Status("MEDIA_PLAYLIST_TRACKS")
        .Global()
        .Get("/api/v1/media/playlists/{playlistIndex}/tracks")
        .ApiReturns<ApiResponse<Page<TrackInfo>>>()
        .Description("List of tracks in a specific playlist")
        .Exclude(Protocol.Mqtt, "Media browsing not suitable for MQTT")
        .Exclude(Protocol.Knx, "Media browsing not suitable for KNX")
        .Exclude(Protocol.SignalR, "Track lists are bulk data better suited for on-demand fetching")
        //
        .Status("MEDIA_PLAYLIST_TRACK_INFO")
        .Global()
        .Get("/api/v1/media/playlists/{playlistIndex}/tracks/{trackIndex}")
        .ApiReturns<ApiResponse<TrackInfo>>()
        .Description("Information about a specific track in a playlist")
        .Exclude(Protocol.Mqtt, "Media browsing not suitable for MQTT")
        .Exclude(Protocol.Knx, "Media browsing not suitable for KNX")
        .Exclude(Protocol.SignalR, "Individual track metadata is static and fetched on-demand")
        //
        .Status("MEDIA_TRACK_INFO")
        .Global()
        .Get("/api/v1/media/tracks/{trackIndex}")
        .ApiReturns<ApiResponse<TrackInfo>>()
        .Description("Information about a specific track")
        .Exclude(Protocol.Mqtt, "Media browsing not suitable for MQTT")
        .Exclude(Protocol.Knx, "Media browsing not suitable for KNX")
        .Exclude(Protocol.SignalR, "Track metadata is static and fetched on-demand")
        //
        // === ZONE STATUS ===
        //
        .Status("ZONE_NAME_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/name")
        .Get("/api/v1/zones/{zoneIndex:int}/name")
        .ApiReturns<string>()
        .Description("Zone name")
        //
        .Status("VOLUME_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/volume")
        .Get("/api/v1/zones/{zoneIndex:int}/volume")
        .SignalR("ZoneVolumeChanged")
        .ApiReturns<int>()
        .Description("Current zone volume level")
        //
        .Status("MUTE_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/mute")
        .Get("/api/v1/zones/{zoneIndex:int}/mute")
        .SignalR("ZoneMuteChanged")
        .ApiReturns<bool>()
        .Description("Current zone mute state")
        //
        .Status("PLAYBACK_STATE")
        .Zone()
        .Get("/api/v1/zones/{zoneIndex:int}/playback")
        .SignalR("ZonePlaybackChanged")
        .ApiReturns<string>()
        .Exclude(Protocol.Knx, "string-based playback state not actionable via KNX")
        .Exclude(Protocol.Mqtt, "string-based playback state not actionable via MQTT")
        .Description("Current playback state")
        //
        // === TRACK STATUS ===
        //
        .Status("TRACK_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track")
        .Knx()
        .Get("/api/v1/zones/{zoneIndex:int}/track")
        .SignalR("ZoneTrackChanged")
        .ApiReturns<int>()
        .Description("Current track information")
        .Description("Current track information")
        //
        .Status("TRACK_METADATA")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/metadata")
        .Get("/api/v1/zones/{zoneIndex:int}/track/metadata")
        .SignalR("ZoneTrackMetadataChanged")
        .ApiReturns<TrackInfo>()
        .Description("Track metadata (title, artist, album, etc.)")
        .Exclude(Protocol.Knx, "Read-only metadata not actionable via KNX")
        //
        .Status("TRACK_METADATA_DURATION")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/duration")
        .Get("/api/v1/zones/{zoneIndex:int}/track/duration")
        .ApiReturns<long>()
        .Description("Track duration in milliseconds")
        .Exclude(Protocol.SignalR, "Individual metadata covered by ZoneTrackMetadataChanged event")
        .Exclude(Protocol.Knx, "Read-only metadata not actionable via KNX")
        //
        .Status("TRACK_METADATA_TITLE")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/title")
        .Knx()
        .Get("/api/v1/zones/{zoneIndex:int}/track/title")
        .ApiReturns<string>()
        .Description("Track title")
        .Exclude(Protocol.SignalR, "Individual metadata covered by ZoneTrackMetadataChanged event")
        //
        .Status("TRACK_METADATA_ARTIST")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/artist")
        .Knx()
        .Get("/api/v1/zones/{zoneIndex:int}/track/artist")
        .ApiReturns<string>()
        .Description("Track artist")
        .Exclude(Protocol.SignalR, "Individual metadata covered by ZoneTrackMetadataChanged event")
        //
        .Status("TRACK_METADATA_ALBUM")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/album")
        .Knx()
        .Get("/api/v1/zones/{zoneIndex:int}/track/album")
        .ApiReturns<string>()
        .Description("Track album")
        .Exclude(Protocol.SignalR, "Individual metadata covered by ZoneTrackMetadataChanged event")
        //
        .Status("TRACK_METADATA_COVER")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/cover")
        .Get("/api/v1/zones/{zoneIndex:int}/track/cover")
        .ApiReturns<string>()
        .Description("Track cover art URL")
        .Exclude(Protocol.SignalR, "Individual metadata covered by ZoneTrackMetadataChanged event")
        .Exclude(Protocol.Knx, "KNX cannot transmit URL strings effectively")
        //
        .Status("TRACK_PLAYING_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/playing")
        .Knx()
        .Get("/api/v1/zones/{zoneIndex:int}/track/playing")
        .SignalR("ZoneTrackPlayingChanged")
        .ApiReturns<bool>()
        .Description("Current playing state")
        //
        .Status("TRACK_POSITION_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/position")
        .Get("/api/v1/zones/{zoneIndex:int}/track/position")
        .ApiReturns<long>()
        .Description("Current track position")
        .Exclude(Protocol.SignalR, "Position updates are covered by progress event")
        .Exclude(Protocol.Knx, "KNX lacks precision for millisecond-based position tracking")
        //
        .Status("TRACK_PROGRESS_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/track/progress")
        .Knx()
        .Get("/api/v1/zones/{zoneIndex:int}/track/progress")
        .SignalR("ZoneProgressChanged")
        .ApiReturns<float>()
        .Description("Track progress percentage")
        //
        .Status("TRACK_REPEAT_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/repeat/track")
        .Knx()
        .Get("/api/v1/zones/{zoneIndex:int}/repeat/track")
        .SignalR("ZoneRepeatModeChanged")
        .ApiReturns<bool>()
        .Description("Track repeat mode status")
        //
        // === PLAYLIST STATUS ===
        //
        .Status("PLAYLIST_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/playlist")
        .Get("/api/v1/zones/{zoneIndex:int}/playlist")
        .SignalR("ZonePlaylistChanged")
        .ApiReturns<int?>()
        .Description("Current playlist information")
        //
        .Status("PLAYLIST_INFO")
        .Description("Detailed playlist information")
        .Zone()
        .Get("/api/v1/zones/{zoneIndex:int}/playlist/info")
        .ApiReturns<PlaylistInfo>()
        .Exclude(Protocol.Mqtt, "Playlist info available via individual playlist/* topics")
        .Exclude(Protocol.SignalR, "Covered by other events or static data")
        //
        .Status("PLAYLIST_NAME_STATUS")
        .Description("Current playlist name")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/playlist/name")
        .Get("/api/v1/zones/{zoneIndex:int}/playlist/name")
        .ApiReturns<string>()
        .Exclude(Protocol.SignalR, "Covered by other events or static data")
        //
        .Status("PLAYLIST_COUNT_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/playlist/count")
        .Get("/api/v1/zones/{zoneIndex:int}/playlist/count")
        .ApiReturns<int>()
        .Description("Number of tracks in current playlist")
        .Exclude(Protocol.SignalR, "Covered by other events or static data")
        //
        .Status("PLAYLIST_SHUFFLE_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/shuffle")
        .Get("/api/v1/zones/{zoneIndex:int}/shuffle")
        .SignalR("ZoneShuffleChanged")
        .ApiReturns<bool>()
        .Description("Playlist shuffle mode status")
        //
        .Status("PLAYLIST_REPEAT_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/repeat/playlist")
        .Get("/api/v1/zones/{zoneIndex:int}/repeat")
        .ApiReturns<bool>()
        .Description("Playlist repeat mode status")
        .Exclude(Protocol.SignalR, "Covered by ZoneRepeatModeChanged event")
        //
        // === CLIENT STATUS ===
        //
        .Status("CLIENT_MUTE_STATUS")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/mute")
        .Get("/api/v1/clients/{clientIndex:int}/mute")
        .SignalR("ClientMuteChanged")
        .ApiReturns<bool>()
        .Description("Current client mute state")
        //
        .Status("CLIENT_LATENCY_STATUS")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/latency")
        .Get("/api/v1/clients/{clientIndex:int}/latency")
        .SignalR("ClientLatencyChanged")
        .ApiReturns<int>()
        .Description("Current client latency setting")
        //
        .Status("CLIENT_ZONE_STATUS")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/zone")
        .Get("/api/v1/clients/{clientIndex:int}/zone")
        .SignalR("ClientZoneChanged")
        .ApiReturns<int?>()
        .Description("Client zone assignment")
        //
        .Status("CLIENT_NAME_STATUS")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/name")
        .Get("/api/v1/clients/{clientIndex:int}/name")
        .ApiReturns<string>()
        .Description("Client name")
        .RecentlyAdded()
        //
        .Status("CLIENT_VOLUME_STATUS")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/volume")
        .Get("/api/v1/clients/{clientIndex:int}/volume")
        .SignalR("ClientVolumeChanged")
        .ApiReturns<int>()
        .Description("Client volume level")
        //
        .Status("CLIENT_STATE")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/state")
        .Get("/api/v1/clients/{clientIndex:int}")
        .ApiReturns<ClientState>()
        .Description("Complete client state information")
        //
        .Status("CLIENT_CONNECTED")
        .Client()
        .Mqtt("snapdog/clients/{clientIndex}/connected")
        .Get("/api/v1/clients/{clientIndex:int}/connected")
        .SignalR("ClientConnected")
        .ApiReturns<bool>()
        .Description("Client connection status")
        //
        // === MQTT-ONLY STATUS ===
        //
        .Status("CONTROL_STATUS")
        .Zone()
        .Mqtt("snapdog/zones/{zoneIndex}/control")
        .Description("Control command execution status (MQTT notifications only)")
        .Description("Control command execution status (MQTT notifications only)")
        .Exclude(Protocol.SignalR, "Covered by other events or static data")
        // === COMMAND RESPONSE STATUS ===
        //
        .Status("COMMAND_STATUS")
        .Global()
        .Get("/api/v1/system/commands/status")
        .SignalR("CommandStatusChanged")
        .Exclude(Protocol.Mqtt, "Command success/failure inferred from state changes")
        .Exclude(Protocol.Knx, "KNX does not provide direct command feedback")
        .Description("Command execution status")
        //
        .Status("COMMAND_ERROR")
        .Global()
        .Get("/api/v1/system/commands/errors")
        .Exclude(Protocol.Mqtt, "Command success/failure inferred from state changes")
        .Description("Command execution errors")
        .Exclude(Protocol.SignalR, "Mqtt only")
        //
        .Status("SYSTEM_ERROR")
        .Global()
        .Mqtt("snapdog/system/error")
        .Get("/api/v1/system/errors")
        .SignalR("ErrorOccurred")
        .Description("System-level errors")
        //
        .Status("COVER")
        .Global()
        .Get("/api/v1/cover/{coverId}")
        .Description("Cover art image data")
        .Exclude(Protocol.Mqtt, "Binary data not suitable for MQTT")
        .Exclude(Protocol.SignalR, "Binary data not suitable for SignalR")
        .Exclude(Protocol.Knx, "Binary data not suitable for KNX")
        .Build();
}
